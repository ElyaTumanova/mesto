(()=>{"use strict";var t={formSelector:"form",inputSelector:"form__input",submitButtonSelector:"form__submit-button",inactiveButtonClass:"form__submit-button_disabled",errorClass:"form__input_disabled"},e=document.querySelector(".popup_place"),o=document.querySelector(".popup_profile"),n=document.querySelector(".popup_photo"),r=document.querySelector(".popup_delete-confirm"),i=document.querySelector(".popup_update-avatar"),a=document.forms.placeForm,c=document.forms.profileForm,u=c.querySelector(".profile-form__input_type_name"),l=c.querySelector(".profile-form__input_type_descripton"),s=document.querySelector(".profile__add-button"),p=document.querySelector(".places"),f=document.querySelector(".profile__edit-button"),y=document.querySelector(".profile__name"),h=document.querySelector(".profile__description"),d=document.forms.avatarForm,v=document.querySelector(".profile__avatar-wrap"),_=document.querySelector(".profile__avatar"),m=document.querySelector(".profile__avatar-edit");function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function k(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==b(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===b(r)?r:String(r)),n)}var r}var S=function(){function t(e,o,n,r,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._likesArr=e.likes,this._ownerId=e.owner._id,this._likeCount=e.likes.length,this._cardId=e._id,this._template=o,this._handleCardClick=n,this._handleCardLike=r,this._userInfo=i,this._userId=i._id,this._handleDeleteCard=a}var e,o;return e=t,(o=[{key:"createNewPlaceCard",value:function(){return this._element=this._getElement(),this._placeCard=this._element.querySelector(".place"),this._placeCardPhoto=this._element.querySelector(".place__photo"),this._placeCardName=this._element.querySelector(".place__name"),this._placeCardDeleteBtn=this._placeCard.querySelector(".place__delete-btn"),this._placeCardLikeBtn=this._placeCard.querySelector(".place__like"),this._likes=this._placeCard.querySelector(".place__like-count"),this._placeCardPhoto.src=this._link,this._placeCardName.textContent=this._name,this._placeCardPhoto.alt=this._name,this._likes.textContent=this._likeCount,this._setLike(),this._setDeleteButton(),this._addEventListenerForCard(),this._element}},{key:"updateLikes",value:function(t){this._likes.textContent=t.length,this._likesArr=t,this._placeCardLikeBtn.classList.toggle("place__like_active")}},{key:"_getElement",value:function(){return document.querySelector(this._template).content.cloneNode(!0)}},{key:"_setLike",value:function(){this._likeStatus()&&this._placeCardLikeBtn.classList.add("place__like_active")}},{key:"_setDeleteButton",value:function(){this._userId===this._ownerId?this._placeCardDeleteBtn.classList.remove("place__delete-btn_disabled"):this._placeCardDeleteBtn.classList.add("place__delete-btn_disabled")}},{key:"_addEventListenerForCard",value:function(){var t=this;this._placeCardDeleteBtn.addEventListener("click",(function(){t._handleDeleteCard(t)})),this._placeCardLikeBtn.addEventListener("click",(function(){t._toggleLike()})),this._placeCardPhoto.addEventListener("click",(function(){t._handleCardClick(t._name,t._link)}))}},{key:"_toggleLike",value:function(){this._handleCardLike(this._cardId,this._likeStatus())}},{key:"_likeStatus",value:function(){var t=this,e=!1;return this._likesArr.forEach((function(o){o._id===t._userId&&(e=!0)})),e}}])&&k(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function P(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==g(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===g(r)?r:String(r)),n)}var r}var C=function(){function t(e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._errorClass=e.errorClass,this._validationForm=o,this._formInputs=Array.from(this._validationForm.querySelectorAll(".".concat(e.inputSelector))),this._formButton=this._validationForm.querySelector(".".concat(this._submitButtonSelector))}var e,o;return e=t,(o=[{key:"enableValidation",value:function(){this._setEventListener(this._validationForm,this._formInputs)}},{key:"_setEventListener",value:function(){var t=this;this._validationForm.addEventListener("input",(function(){t.checkValidation()})),this._formInputs.forEach((function(e){e.addEventListener("input",(function(){t._isValid(e)}))}))}},{key:"_isValid",value:function(t){if(t.validity.valid)this._hideError(t);else{var e=t.validationMessage;this._showError(t,e)}}},{key:"_showError",value:function(t,e){t.classList.add("".concat(this._errorClass)),this._validationForm.querySelector(".".concat(t.name,"-error-message")).textContent=e}},{key:"_hideError",value:function(t){t.classList.remove("".concat(this._errorClass)),this._validationForm.querySelector(".".concat(t.name,"-error-message")).textContent=""}},{key:"checkValidation",value:function(){var t=this._formInputs.some((function(t){return!t.validity.valid}));this._toggleButton(t)}},{key:"_toggleButton",value:function(t){t?(this._formButton.classList.add("".concat(this._inactiveButtonClass)),this._formButton.disabled=!0):(this._formButton.classList.remove("".concat(this._inactiveButtonClass)),this._formButton.disabled=!1)}},{key:"removeValidationErrors",value:function(){var t=this;this._formInputs.forEach((function(e){t._isValid(e)}))}}])&&P(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==w(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===w(r)?r:String(r)),n)}var r}var O=function(){function t(e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=o,this._renderer=e}var e,o;return e=t,(o=[{key:"renderItem",value:function(t,e){var o=this;t.reverse().forEach((function(t){var n=o._renderer(t,e);o.addItem(n)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&E(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function L(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==j(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===j(r)?r:String(r)),n)}var r}var B=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=e,this._submitButton=e.querySelector(".form__submit-button"),this._closePopupByOvelayClick=this._closePopupByOvelayClick.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}var e,o;return e=t,(o=[{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._popup.querySelector(".popup__close").addEventListener("click",(function(){return t.closePopup()})),this._popup.addEventListener("click",this._closePopupByOvelayClick)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.closePopup()}},{key:"_closePopupByOvelayClick",value:function(t){t.target.classList.contains("popup")&&this.closePopup()}}])&&L(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function I(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==q(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===q(r)?r:String(r)),n)}var r}function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,o){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:o):r.value}},R.apply(this,arguments)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(a,t);var e,o,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(n);if(r){var o=x(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._popupForm=e._popup.querySelector(".form"),e._formSubmitButtonText=e._popupForm.querySelector(".form__submit-button").textContent,e}return e=a,(o=[{key:"openPopup",value:function(){R(x(a.prototype),"openPopup",this).call(this)}},{key:"closePopup",value:function(){R(x(a.prototype),"closePopup",this).call(this)}},{key:"setEventListeners",value:function(){var t=this;R(x(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t.deleteCard()}))}},{key:"renderLoading",value:function(t){this._submitButton.textContent=t?"Сохранение...":this._formSubmitButtonText}},{key:"setSubmitAction",value:function(t){this.deleteCard=t}},{key:"_handleEscClose",value:function(t){R(x(a.prototype),"_handleEscClose",this).call(this,t)}},{key:"_closePopupByOvelayClick",value:function(t){R(x(a.prototype),"_closePopupByOvelayClick",this).call(this,t)}}])&&I(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(B);function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function z(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==F(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===F(r)?r:String(r)),n)}var r}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,o){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:o):r.value}},V.apply(this,arguments)}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}var U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(a,t);var e,o,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=N(n);if(r){var o=N(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===F(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._popupPhotoDesc=e._popup.querySelector(".photo-popup__description"),e._popupPhotoPhoto=e._popup.querySelector(".photo-popup__photo"),e}return e=a,(o=[{key:"openPopup",value:function(t,e){V(N(a.prototype),"openPopup",this).call(this),this._popupPhotoDesc.textContent=t,this._popupPhotoPhoto.src=e,this._popupPhotoPhoto.alt=t}},{key:"closePopup",value:function(){V(N(a.prototype),"closePopup",this).call(this)}},{key:"setEventListeners",value:function(){V(N(a.prototype),"setEventListeners",this).call(this)}},{key:"_handleEscClose",value:function(t){V(N(a.prototype),"_handleEscClose",this).call(this,t)}},{key:"_closePopupByOvelayClick",value:function(t){V(N(a.prototype),"_closePopupByOvelayClick",this).call(this,t)}}])&&z(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(B);function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function H(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==J(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===J(r)?r:String(r)),n)}var r}function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,o){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:o):r.value}},G.apply(this,arguments)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function K(t){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},K(t)}var Q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(a,t);var e,o,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=K(n);if(r){var o=K(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===J(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(o=i.call(this,t))._formSubmit=e,o._popupForm=o._popup.querySelector(".form"),o._popupFormInputs=o._popupForm.querySelectorAll(".form__input"),o._popupPlaceName=o._popupForm.querySelector(".place-form__input_type_name"),o._popupPlaceLink=o._popupForm.querySelector(".place-form__input_type_link"),o._formSubmitButtonText=o._popupForm.querySelector(".form__submit-button").textContent,o}return e=a,(o=[{key:"openPopup",value:function(){G(K(a.prototype),"openPopup",this).call(this)}},{key:"closePopup",value:function(){G(K(a.prototype),"closePopup",this).call(this),this._popupForm.reset()}},{key:"setEventListeners",value:function(){var t=this;G(K(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._formSubmit(t._getInputValues())}))}},{key:"renderLoading",value:function(t){this._submitButton.textContent=t?"Сохранение...":this._formSubmitButtonText}},{key:"_handleEscClose",value:function(t){G(K(a.prototype),"_handleEscClose",this).call(this,t)}},{key:"_closePopupByOvelayClick",value:function(t){G(K(a.prototype),"_closePopupByOvelayClick",this).call(this,t)}},{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._popupFormInputs.forEach((function(e){return t._formValues[e.name]=e.value})),this._formValues}}])&&H(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(B);function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function X(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==W(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===W(r)?r:String(r)),n)}var r}var Y=function(){function t(e,o,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e,this._description=o,this._link=n}var e,o;return e=t,(o=[{key:"getUserInfo",value:function(){return{profileName:this._name.textContent,profileDescripton:this._description.textContent}}},{key:"setUserInfo",value:function(t){this._name.textContent=t.profileName,this._description.textContent=t.profileDesccription,this._link.src=t.profileAvatar}},{key:"updateUserAvatar",value:function(t){this._link.src=t}},{key:"updateUserInfo",value:function(t){this._name.textContent=t.profileName,this._description.textContent=t.profileDesccription}}])&&X(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function $(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==Z(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===Z(r)?r:String(r)),n)}var r}var tt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.url,this._headers=e.headers,this._authorization=e.headers.authorization}var e,o;return e=t,(o=[{key:"getCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._authorization,"Content-type":"application/json"}}).then(this._handleResponse)}},{key:"addCard",value:function(t){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:{authorization:this._authorization,"Content-type":"application/json"},body:JSON.stringify({name:t.name,link:t.link})}).then(this._handleResponse)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this._authorization,"Content-type":"application/json"}}).then(this._handleResponse)}},{key:"likeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"PUT",headers:{authorization:this._authorization,"Content-type":"application/json"}}).then(this._handleResponse)}},{key:"deleteLikeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:{authorization:this._authorization,"Content-type":"application/json"}}).then(this._handleResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:{authorization:this._authorization,"Content-type":"application/json"}}).then(this._handleResponse)}},{key:"upadateUserInfo",value:function(t){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:{authorization:this._authorization,"Content-type":"application/json"},body:JSON.stringify({name:t.profileName,about:t.profileDesccription})}).then(this._handleResponse)}},{key:"changeAvatar",value:function(t){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._authorization,"Content-type":"application/json"},body:JSON.stringify({avatar:t})}).then(this._handleResponse)}},{key:"_handleResponse",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}}])&&$(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}(),et=new C(t,a);et.enableValidation();var ot=new C(t,c);ot.enableValidation(),new C(t,d).enableValidation();var nt=new tt({url:"https://mesto.nomoreparties.co/v1/cohort-68",headers:{authorization:"0573a051-c261-46c2-9f99-9d24a33a3c63"}}),rt=nt.getCards(),it=nt.getUserInfo(),at=new U(n);at.setEventListeners();var ct=new O((function(t,e){return new S(t,"#placeCard",at.openPopup.bind(at),ut,e,pt).createNewPlaceCard()}),p);function ut(t,e){var o=this;e?nt.deleteLikeCard(t).then((function(t){return o.updateLikes(t.likes)})).catch((function(t){return console.log("catch:".concat(t))})):nt.likeCard(t).then((function(t){return o.updateLikes(t.likes)})).catch((function(t){return console.log("catch:".concat(t))}))}Promise.all([rt,it]).then((function(t){var e=t[0],o=t[1];ct.renderItem(e,o)})).catch((function(t){return console.log("catch:".concat(t))}));var lt=new Q(e,(function(t){var e={name:t.placeName,link:t.placeImageLink},o=nt.addCard(e),n=nt.getUserInfo();lt.renderLoading(!0),Promise.all([o,n]).then((function(t){var e=t[0],o=t[1];ct.renderItem([e],o),lt.closePopup()})).catch((function(t){return console.log("catch:".concat(t))})).finally((function(){lt.renderLoading(!1)}))}));lt.setEventListeners();var st=new D(r);function pt(t){var e=this;st.openPopup(),st.setSubmitAction((function(){nt.deleteCard(t._cardId).then((function(){e._placeCard.remove(),e._placeCard=null,st.closePopup()})).catch((function(t){return console.log("catch:".concat(t))}))}))}st.setEventListeners();var ft=new Q(o,(function(t){ft.renderLoading(!0),nt.upadateUserInfo(t).then((function(){ft.closePopup(),yt.updateUserInfo(t)})).catch((function(t){return console.log("catch:".concat(t))})).finally((function(){ft.renderLoading(!1)}))}));ft.setEventListeners();var yt=new Y(y,h,_);it.then((function(t){var e={profileName:t.name,profileDesccription:t.about,profileAvatar:t.avatar};yt.setUserInfo(e)})).catch((function(t){return console.log("catch:".concat(t))}));var ht=new Q(i,(function(t){ht.renderLoading(!0),nt.changeAvatar(t.avatarImageLink).then((function(){ht.closePopup(),yt.updateUserAvatar(t.avatarImageLink)})).catch((function(t){return console.log("catch:".concat(t))})).finally((function(){ht.renderLoading(!1)}))}));ht.setEventListeners(),f.addEventListener("click",(function(){ft.openPopup();var t=yt.getUserInfo();u.value=t.profileName,l.value=t.profileDescripton,ot.removeValidationErrors(),ot.checkValidation()})),s.addEventListener("click",(function(){lt.openPopup(),et.checkValidation()})),v.addEventListener("mouseover",(function(){m.classList.add("profile__avatar-edit_active")})),v.addEventListener("mouseout",(function(){m.classList.remove("profile__avatar-edit_active")})),m.addEventListener("click",(function(){ht.openPopup(),et.checkValidation()}))})();